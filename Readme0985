--------------------
//1002 by ぴざまん
・ポータルバグ修正
・スキル関係のNullチェック強化(by(凸))
	(map/)
	skill.c
		skill_castend_map() 修正

--------------------
//1001 by (凸)
・0x1c9でいくつかパケットを見比べて変化のないところを固定値で埋め込み(今後情報が集まると変わる可能性大)
・ダンス中はSPだけ回復しないように変更
・聖体で相方のSPが10以下だと使用失敗にして使用したらSPを10減らしてみる(未確認)
・合奏のスキル使用パケットを若干変更

	(map/)
	clif.c
		clif_getareachar_skillunit() 0x1c9の穴埋め開始
		clif_skill_setunit() 0x1c9の穴埋め開始
	pc.c
		pc_natural_heal_sub() ダンス中はSPのみ回復しないように変更
	skill.c
		skill_check_condition() 変更
		skill_check_condition_char_sub() 聖体は相方のSPチェックするように変更
		skill_check_condition_use_sub() 聖体は相方のSPを減らすように変更

--------------------
//1000 by ぴざまん
・0999の変更取り戻し
・トラップの巻き込み実装
・イドゥンの林檎でNPCまで回復した(ように見える)問題修正(未テスト)
・デモンストレーションのエフェクト変更(こちらに明記)
	(map/)
	skill.c
		skill_count_target() 追加
		skill_unit_onplace()、skill_trap_splash() 変更
--------------------
//0999 by eAthena Dev Team (Yor's Fixes)
(login/)
	added email for accounts
(char/)
	added email for character deletion
--------------------
//0998 by (凸)
・battle.cで引数の存在を確認せずに値を見に行ってる関数をいくつか修正
・ダンス中は座れないようにした(本鯖相違スレッド part2 >>114 DoTさん)
・ダンス中はHP、SPが回復しないように変更(同上)
・ダンス中は通常攻撃できないようにした(本鯖相違スレッド part2 >>116 ・・・さん)
・合奏中片方が落ちた場合、残ったほうで演奏を継続するようにした(同上)
・合奏中はアドリブ以外できないように変更(同上)
・合奏発動条件にダンス中じゃない＆座っていないを追加(本鯖相違スレッド part2 >>118 ろろさん)
・阿修羅使用後にHPも回復しなかったのを修正

	(map/)
	battle.c
		battle_counttargeted() 修正
		battle_get系 たぶん全部修正
	clif.c
		clif_parse_WalkToXY() 合奏の判断方法の変更
		clif_parse_ActionRequest() ダンス中は殴らない座らないように変更
	map.c
		map_quit() ダンス中断追加
	mob.c
		mob_damage() skill_stop_dancingの引数増加による変更
	pc.c
		pc_setpos() 同上
		pc_damage() 同上
		pc_equipitem() 同上
		pc_natural_heal_sub() ダンス中は自然回復しないように＆阿修羅時はSPのみ回復しないように
	skill.c
		skill_castend_nodamage_id() skill_stop_dancingの引数増加による変更
		skill_status_change_start() 同上
		skill_check_condition_char_sub() 相手がダンス中や座っていても合奏できないように変更
		skill_check_condition_use_sub() 同上
		skill_use_id() 合奏の判断方法の変更＆合奏中はアドリブ以外禁止に
		skill_status_change_end() 合奏のダンス状態解除は相手のval4を0にするようにした
		skill_is_danceskill() 戻り値変更
		skill_stop_dancing() 引数増加、合奏で片方だけ落ちたときの処理追加
		skill_delunitgroup() 合奏時のステータス変更処理を↑に移した
		skill_clear_unitgroup() 自分のbl->idとユニットグループのgroup->src_idが違うときは削除しないように変更
	skill.h 変更

--------------------
//0997 by (凸)
・二人で合奏、三人で聖体を実装
	合奏 バード・ダンサーが隣接したセルにいて同じスキルを持っている時に発動
		スキルレベルは両者のスキルレベルの中間
		本鯖仕様が分からないけど斜め隣接もOK
	聖体 使用者のX軸で-1と+1の場所に一人ずつアコライトかプリーストがいる時に発動すると思う(未テスト)
		使用者 ○ アコプリ ●
		OK ●○●

		NG ●
		   ○●
・トーキーボックスを使って設置時に座っていた時はスキル使用失敗にしてみた

	(db/)
	item_db.txt 村正の呪い率を5%に(by e2さん)
	(map/)
	skill.c
		skill_check_condition_char_sub() 追加
		skill_check_condition_use_sub() 追加
		skill_check_condition() 変更
		skill_use_id() 変更
		skill_initunitgroup() 変更
		skill_delunitgroup() 変更
	clif.c
		clif_parse_UseSkillToPos() 変更

--------------------
//0996 by (凸)
・アドリブの5秒制限をcast_db.txtのupkeep_time2で制御できるように変更
・村正で自分を呪わせるためにbonus2 bAddEff2を追加
・呪われていて終了できない時にも「今は終了できません」が表示されるようにした
・ダンスエフェクト等移動時に効果の適用判断が移動前に行われていたのを移動後に変更＆使わなくていい変数を廃止

	(db/)
	cast_db.txt
	const.txt
	item_db.txt
	(doc/)
	item_bonus.txt
	(src/)
	clif.c
		clif_parse_QuitGame() 変更
	map.h addeff2,arrow_addeff2 追加
	pc.c
		pc_calcstatus() 変更
		pc_bonus2() 変更
	skill.c
		skill_additional_effect() 変更
		skill_check_condition() 変更
		skill_unit_move_unit_group() 変更

--------------------
//0995 by (凸)
・battle.pet_lootitemのデフォルトがyesになっていたのを修正
・battle.pet_lootitemの適用をforeach前でやるように修正
・ペットの初期化でpd->lootitemがある時しか初期化されていなかったのを修正
・領域が移動して対象が領域から抜けても効果が解除されない問題を修正
・アドリブはダンス発動から5秒以上経たないと使用できないようにした

	(map/)
	pet.c
		pet_data_init() 修正
		pet_ai_sub_hard() 修正
		pet_ai_sub_hard_lootsearch() 修正
	skill.c
		skill_blown() 変更
		skill_unit_onlimit() エラーメッセージ修正
		skill_check_condition() 変更
		skill_initunitgroup() sd_data[SC_DANCING].val3にgettick()
		skill_unit_move_unit_group_sub() 追加
		skill_unit_move_unit_group() 変更
	skill.h skill_unit_move_unit_group() 引数変更
	battle.c
		battle_config_read() pet_lootitem=0に修正
	pc.c
		pc_walk() 変更

--------------------
//0994 by huge
・battle.pet_lootitemが適応されていなかったのを修正。
・ペットにパフォーマンスをさせた後、10秒間くらいは拾わせないように。

	(map/)
	map.h	pet_dataにlootitem_timer追加。
	pet.c
		pet_ai_sub_hard_lootsearch() 修正。
		pet_lootitem_drop() 修正。

--------------------
//0993 by (凸)
・一人で合奏だけど合奏スキル中は動けないように
・アンコール実装。直前に使ったダンススキルを半分のSPで使えます
・ダンス中に移動するとエフェクトも移動するようにした
・未実装のスキルが使われるとUnknown skillと表示されることがあるかもしれません
・Sageのキャストキャンセルで実は前のスキルを覚えていなかった問題の修正

	(map/)
	clif.c
		clif_parse_WalkToXY() 変更
	map.h アンコール用変数の追加
	pc.c
		pc_walk()
	skill.c
		skill_blown
		skill_castend_nodamage_id
		skill_unitsetting() 変更
		skill_unit_onplace() 罠で同じ処理をしているcaseをまとめた
		skill_unit_onout() 使われてないunit2を削除
		skill_check_condition() 変更
		skill_use_id
		skill_initunitgroup() 使ったダンススキルを変数に入れるようにした
		skill_unit_move_unit_group() 追加
	skill.h 変更

--------------------
//0992 by nokia

map_quitを修正してメモリを釈放する時何度もを釈放するためメモリの間違いが起こる問題を招く

	(map/)
	map.c
		map_quit()

--------------------
//0991 by (凸)
・トーキーボックスを自分が踏んでも発動しない本鯖仕様に変更
・スキル詠唱中とディレイ中はクライアントを終了できないようにしたけど、敵に攻撃されているときは終了できます(ごめんなさいっ！！)

	(map/)
	clif.c
		clif_parse_QuitGame() 変更
	skill.c
		skill_unitsetting() 変更

--------------------
//0990 by ぴざまん
・一部のトラップを範囲攻撃に変更（巻き込みは未実装）。
・mapflagにpvp_nocalcrankとpvp_nightmaredrop追加。
	・<gatname><tab>mapflag<tab>pvp_nocalcrank<tab>dummy
	　PvPによるランキング計算をしないようにします。
	・<gatname><tab>mapflag<tab>pvp_nightmaredrop<tab><item>,<type>,<per>
	　PvPにて死亡した場合、<per>の確率でアイテムをドロップします。
	　<item>: ドロップするアイテムIDを指定します。randomと記述すると所持品からランダムにドロップします。
	　<type>: ドロップするアイテムのタイプを指定します。inventory:所持品 equip:装備品 all:全部
	　<per>: ドロップする確率です。万分率で指定します。
	(map/)
	skill.c
		skill_unit_onplace() 変更
		skill_trap_splash() 追加
	pc.c
		pc_damage() 変更
	npc.c
		npc_parse_mapflag() 変更
	map.h
		map_dataにメンバ追加
	(conf/)
	mapflag.txt
		ナイトメアモードにドロップ設定追加

--------------------
//0989 by (凸)
・スプリングトラップを某所で見たSSを元に実装してみた。違ったら相違スレへ
・ディテクティングを某所で見た解説文を元に実装してみた。違ったら相違スレへ
・キャストキャンセル時のdelete_timerエラーに追加でスキルIDを表示するようにした。あわせて報告するとエラーの原因が分かるかも

	(map/)
	skill.c
		skill_castend_nodamage_id() 変更
		skill_castend_pos2() 変更
		skill_castcancel() 変更

--------------------
//0988 by (凸)
・トーキーボックスは常に足元に置けるように変更とKalenさんに貰った情報等を元にパケットを本鯖にあわせてみた
・ショックウェーブトラップに効果を追加したつもり(未確認)
・ブラストマインとクレイモアトラップを殴ると吹き飛ぶようにした
・リムーブトラップで罠(skill_require_dbで指定したアイテム)を回収できるようにした
・↑の実装により罠の時間切れで罠が出るオリジナル仕様はコメントアウト
・ブラストマインの効果時間が長いのを修正

	(db/)
	cast_db.txt
	(map/)
	battle.c
		battle_check_target() 変更
	mob.c
		mobskill_castend_pos() 変更
	skill.c
		skill_additional_effect() 変更
		skill_blown() 変更
		skill_castend_nodamage_id() 変更
		skill_castend_pos2() 変更
		skill_unitsetting() 変更
		skill_unit_onplace() 変更
		skill_unit_ondamaged() 変更
		skill_castend_pos() 変更
		skill_unit_timer_sub() 変更

--------------------
//0987 by 胡蝶蘭

・ユーザー定義関数/サブルーティンに引数を指定可能に
	詳しくは script_ref.txt を参照
	
	(map/)
	scirpt.c
		buildin_getarg()追加
		buildin_callsub(),buildin_callfunc(),run_func()修正
	(doc/)
	script_ref.txt
		引数についての説明追加

・getguildname,getpartyname,getcastlename,strcharinfo修正
	C_STRで定数文字列(C_CONSTSTR)を返していた問題修正
	strcharinfoでギルド名などを所得する際、未所属だったときの問題
	
	(map/)
	script.c
		buildin_getguildname(),buildin_getpartyname()
		buildin_getcastlename(),buildin_strcharinfo()

--------------------
//0986 by (凸)
・client_packetの記述から推察してトーキーボックスを実装してみたつもり

	(db/)
	skill_db.txt
	(map/)
	clif.c
		clif_talkiebox() 追加
		clif_parse_UseSkillToPos() 変更
		clif_parse() 変更
	clif.h 変更
	map.h 変更
	skill.c
		skill_castend_pos2() 変更
		skill_unitsetting() 変更
		skill_unit_onplace() 変更

--------------------
//0985 by (凸)
・サーバーsnapshot
・/script/extensionに語り部を追加したり
・0984でAthena雑談スレッド part3>>92 Michaelさんの修正を取り込んでた
・バグ報告スレッド part5 >>45に転載されてた あやねさんの修正を取り込み
・バグ報告スレッド part5 >>54 rariさんのたぬき帽修正を取り込み

	(script/extension/)
	npc_event_kataribe6.txt 追加
	npc_event_kataribe7.txt 追加
	(script/npc/)
	quest/npc_event_hat.txt 修正
	job/npc_job_magician.txt 修正

--------------------

//0984以前の変更点はReadmeを参照してください

--------------------

    Athena Dev. v2.1.1       Released: Middle July, 2003
    (c) 2003 Athena Project.
     http://project-yare.de/

1. Athena(アテナ)について
2. このリリースについて
3. 必要な物
4. 使い方
5. 現在の仕様
6. 祝辞
7. 免責事項
8. 募集
9. English


1. アテナについて
    アテナとは2003年1月半ばにでた0052.lzhをベースとして作られているエミュレータの一つです。
    基本的なライセンスはオリジナルがGPLの下に配布されている為、
    これに従いGPLの下配布を許可します。
    /*
        改良版を配布する場合は必ずこのREADMEを書き換えてください。
        何処を改良したのか報告(athena@project-yare.deまで)して貰えると助かります。
        バイナリのみの配布はGPL違反ですので"必ず"ソースも添付してください。
     */
    動作の確認は以下の通りのみ行っています。
    // ただし完璧に動く事を保証するものでありません
    対象CPU: Intel Pentium系   // PentiumII以上で確認.
        FreeBSD 4.8R, 4.6.2R
        Linux RedHat 7.3
        cygwin + gcc 3.2 20020927 (prerelease)
    開発元URL: http://project-yare.de/


2. このリリースについて
    今回のリリースは前回(V2.1)同様開発版のリリースのみです。
    2.1に比べ下記の点が修正されています。
        mapのデフォルト設定が韓国data.grfのみ正常に動作するようになっていた点
        common/timer.cやmap/script.cの幾つかのバグ

    迅速にUpdateを強く推奨するものではありませんが各自の判断で行って下さい。


3. 必要な物
    data.grf      //sdata.grfは必要に応じて
    account.txt   //存在しない場合athena.shが自動生成します
    conf/*.cnf    //Map用とChar用の二種類あります
    conf/npc*.txt //npc設定用ファイルです。複数のファイルに分けることが可能です。
    db/*.txt      //アイテム、job情報など


4. 使い方
    > tar xvfz athena-d?.?.tar.gz
    > cd athena-d?.?.tar.gz
    > make
    > vi conf/char_athena.cnf       //IP(127.0.0.1)の部分を環境に合わせて変更してください
    > vi conf/map_athena.cnf        //同上、またmap設定などは、このファイルで行います。
    > ./athena.sh
    上記を行えば"たぶん"起動します。

    補足:
    conf/npc_sampleJ.txtにはスクリプトの書き方について色々な説明が記載されています。
    もし、独自のMap設定を行ってみたい人や、スクリプトを弄りたい方は参考にしてください。
    ただし、開発中のためスクリプトの仕様が変更される可能性が高いです。
    command.txtには実装済みの特殊コマンドについての説明を記載しています。


5. 現在の仕様
    本鯖と比べておかしい(例えばプバが歩く、ポリンがアイテムを拾わないなど)点は、
    全て現在開発中に因るものです。
    現状としてキャラクタ系及びモンスター系のバグ報告は無視される可能性が高いです。

    バグ報告について必ず発生条件をお書き下さい。
    下にある報告用テンプレートを使って報告して頂くと助かります。
    報告先はエミュ板の開発スレにでも。
    ---- Athena v 2.0 (stable or develop) ----
    【gcc ver】gcc -vを実行時に表示される内容
    【動作システム】FreeBSD, Linux(ディストリビュージョンも), cygwinなど
    【発生内容】mapが落ちてしまった時の表示されていたデバッグ情報など具体的に書いてください。
    【操作内容】具体的にどんな操作を行ったかを書いてください。
    ------------------ END -------------------
    理想はテンプレに加えてmap.coreなどcoreファイルをUploaderにアップして頂くことですが
    問題のMapだけの状態にしcoreの吐く容量に注意してください。
    /*
        確認した限りでは324個ほどmapデータを読み込ませると、
         40MB近いcoreファイルを吐き出します @FreeBSD
         cygwinの場合はstackdumpというファイルになるそうです。
        しかし、coreファイルなどをgzip圧縮などすれば大幅に小さくなります。
         大凡30MBのcoreファイルが2.9MBほどになるようです。
        ですので、もしアップロードする場合はgzip圧縮など各自行ってください。
     */

    今回のリリースだけでなくHISTORYを作成すると大量に記述が必要な為省略しています。
    // 多い日だと本当に結構ありますので‥‥。


6. 祝辞
    今回このAthena開発版を出すに当たって感謝したい方々(順番不同)
        Lemming氏 (Project YARE)
        0052氏 (Uploader)
        35氏 (エミュ開発スレ)
        Johan Lindh氏(Author of memwatch)
        YARE forumのNPC情報を作成した方々
        weiss研究会BBSの様々な情報ファイルを作成した方々
        最後に、.coreファイル達


7. 免責事項
    Athena Projectは一切Athenaの動作に関する保証等は行いません。
    つまり、Athenaは無保証です。
    athena@project-yare.deに動作・操作等に関する質問などを送られても一切お答えできません。
    又Athenaを用いたことにより生じた被害・問題等の責任は一切Athena Projectは負いません。


8. 募集
    athenaの開発に参加したい//興味があるという方ご連絡下さい。
    我々は貴方の参加をお待ちしています。
    // 最新版が欲しいだけで何ら協力して頂けないという方はお断りです;-)
    [募集要項: プログラマ(2-3人)]
        年齢: 不問
        性別: 不問
        言語: 日本語が理解可能
        内容: C言語もしくはC++による開発。(特にネットワークやDBの経験が有る方大募集!)
    [募集要項: 翻訳(?人)]
        年齢: 不問
        性別: 不問
        言語: 日本語、英語が理解可能
        内容: 仏蘭西語、独逸語、西班牙語、伊太利亜語、泰(タイ)語、朝鮮語、中国語へ文献、サイトなどの翻訳
    連絡先: athena@project-yare.de 雑務担当まで。


9. English
     This release is just fixed some bugs in timer.c, script.c and map_athena1.conf.


(c) 2003 Athena Project.
