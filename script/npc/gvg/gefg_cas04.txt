//===================================================================
//gefg_cas04         by kalen
//===================================================================
//----gef_fild13----
gef_fild13.gat,190,283,3	script	ギルドフラッグ#g4-1	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gef_fild13.gat,199,274,3	script	ギルドフラッグ#g4-2	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
//----gefg_cas04----
gefg_cas04.gat,24,157,4	script	ギルドフラッグ#g4-3	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,35,158,4	script	ギルドフラッグ#g4-4	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,44,184,4	script	ギルドフラッグ#g4-5	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,51,184,4	script	ギルドフラッグ#g4-6	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,39,212,7	script	ギルドフラッグ#g4-7	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,29,212,1	script	ギルドフラッグ#g4-8	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,24,73,1	script	ギルドフラッグ#g4-9	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
gefg_cas04.gat,35,73,4	script	ギルドフラッグ#g4-10	722,{
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (@GIDg4 != 0) goto LStartg;
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "正式所有者がないアジトであることを";
		mes "公表する。";
		next;
		mes " ";
		mes "2.";
		mes "こちらを守っている凄じい";
		mes "試練に勝って、エンペリウムを";
		mes "破壊する勇者には国王が";
		mes "認定するアジト所有権が附与される";
		close;
LStartg:
		mes "[ ルーンミッドガッツ王国領 ]";
		mes " ";
		mes "1.";
		mes "こちらはルーンミッドガッツ王国に";
		mes "よって";
		mes "ギルド ^ff0000 " + GetGuildName(@GIDg4) + " ^000000の";
		mes "所有であることを認められている。";
		next;
		mes " ";
		mes "2.";
		mes "^ff0000 " + GetGuildName(@GIDg4) + " ^000000 のマスターは";
		mes "^ff0000 " + getguildmaster(@GIDg4) + " ^000000である。";
		mes "これに異議のある者は、剣を取り";
		mes "力を以って名誉を勝ち取りなさい。";
		close;
OnRecvCastleG04:
	FlagEmblem getcastledata("gefg_cas04.gat",1);
	end;
}
//------------------------------カプラ--------------------------------
gefg_cas04.gat,59,70,3	script	カプラ職員::kapra_gefg04	117,{
	cutin "kafra_01",2;
	set @GIDg4,getcastledata("gefg_cas04.gat",1);
	if (getcharid(2) == @GIDg4) goto LStartg;
	mes "[カプラ職員]";
	mes "私は、ギルド";
	mes " ^ff0000" + GetGuildName(@GIDg4) + "^000000";
	mes "の皆様にだけお仕えするように";
	mes "契約されております。";
	mes "他のカプラサービスを";
	mes "ご利用くださいませ。";
	goto L_EXIT;
LStartg:
	mes "[カプラ職員]";
	mes "いらっしゃいませ ^ff0000" + GetGuildName(@GIDg4) + "^000000 の皆さん";
	mes "カプラサービスは";
	mes "いつも皆様のそばにいます。";
	next;
	menu "倉庫サービス",L2,"空間移動サービス",L3,"カートサービス",L4,"終了",L7;
L2:
	if(getskilllv(1) < 6) goto Lerror2_1;
	if (Zeny < 40) goto Lerror2_2;
		set Zeny,Zeny-40;
		openstorage;
		goto L_EXIT;
	Lerror2_1:
		mes "[カプラ職員]";
		mes "倉庫は基本スキルレベル6を";
		mes "習得してから利用可能となります。";
		goto L_EXIT;
	Lerror2_2:
		mes "[カプラ職員]";
		mes "お客様、お金が足りません。";
		mes "倉庫利用料金は 40 Zenyです。";
		goto L_EXIT;
L3:
	mes "[カプラ職員]";
	mes "目的地をお選び下さい。";
	next;
	menu "ゲフェン -> 200 z",L3_1,"取り消し",L3_2;
		L3_1:
			if (Zeny < 200) goto Lerror3;
			set Zeny,Zeny-200;set KF_PIT,KF_PIT+20;warp "geffen.gat",120,39;end;
		L3_2:
				mes "[カプラ職員]";
				mes "ありがとうございました。";
				mes "またご利用くださいませ。";
				goto L_EXIT;
		Lerror3:
				mes "[カプラ職員]";
  				mes "お客様、お金が足りません。";
   				mes "所持金をお確かめください。";
				goto L_EXIT;
L4:
	if (!((Class == 5) || (Class == 10) || (Class == 18))) goto Lerror4_1;
	mes "[カプラ職員]";
	mes "カート利用料金は 800 Zenyです。";
	mes "また、カートを利用するには";
	mes "｢プッシュカート｣スキルが必要です。";
	mes "そのスキルがないとカートを利用";
	mes "できずにお金だけ消えてしまいます。";
	mes "準備はよろしいですか？";
	next;
	menu "利用する",L4_1,"取り消し",-;
		mes "[カプラ職員]";
		mes "ありがとうございました。";
		mes "またご利用くださいませ。";
		goto L_EXIT;
	L4_1:
		if (Zeny < 800) goto Lerror4_2;
		set Zeny,Zeny-800;
		setcart;
		goto L_EXIT;
	Lerror4_1:
		mes "[カプラ職員]";
		mes "申し訳ございません。";
		mes "カートは商人とブラックスミス、";
		mes "そしてアルケミスト専用の";
		mes "サービスです。";
		goto L_EXIT;
	Lerror4_2:
		mes "[カプラ職員]";
		mes "お客様、お金が足りません。";
		mes "カート利用料金は 800 Zenyです。";
		goto L_EXIT;
//Cart already have
//Lerror4_3:
//mes "[カプラ職員]";
//mes "お客様は現在カートを";
//mes "利用されています。";
//goto L_EXIT;
L7:
	mes "[カプラ職員]";
	mes "我々カプラサービスは、より完璧な";
	mes "サービスと管理業務を目指し";
	mes "お客様が安心してご利用いただけるよう";
	mes "いつも最善を尽くしています。";
	mes "（株）カプラサービスをご利用いただき";
	mes "ありがとうございました。";
L_EXIT:
	cutin "kafra_01",255;
	close;
OnInit:
	disablenpc "kapra_gefg04";
	end;
OnRecvCastleG04:
	if (getcastledata("gefg_cas04.gat",9) != 1) end;
	enablenpc "kapra_gefg04";
	end;
}
//-------------------------------執事---------------------------------
//gefg_cas04.gat,73,46,3	script	ケルバーリ	55,{
//	set @GIDg4,getcastledata("gefg_cas04.gat",1);
//	if (getcharid(2) == @GIDg4) goto LStartg;
//	mes "NO MSG";
//	close;
//LStartgm:
//	mes "[執事ケルバーリ]";
//	mes "あなた方がいくら脅そうとも、";
//	mes "私は私のマスターである";
//	mes "^ff0000" + getguildmaster(@GIDg4) + "^000000様にのみ";
//	mes "お仕えする身である。";
//	mes "ガーディアンたちはどこか！";
//	mes "早くこの無礼な者等を追放しなさい！";
//	close;
//LStartg:
//	mes "執事機能は未実装です。";
//	close;
//}
//-----------------------------スイッチ-------------------------------
gefg_cas04.gat,113,115,0	script	　	111,{
	mes "小さなレバーがあります。";
	mes "引きますか？";
	next;
	menu "引く",-,"引かない",L2;
	warp "gefg_cas04",73,47;
	end;
L2:
	close;
}
//-----------------------------スイッチ2------------------------------
gefg_cas04.gat,58,75,0	script	　	111,{
	mes "[声]";
	mes "試練に挑むならば先へ進むがよい";
	next;
	mes " ";
	mes "小さなレバーがあります。";
	mes "引きますか？";
	next;
	menu "引く",-,"引かない",L2;
	getcastledata "gefg_cas04.gat",1,@GIDg4;
	if (getcharid(2) != @GIDg4) goto L1n;
	if (0 == @GIDg4) goto L1n;
	warp "gld_dun04",268,108;
	end;
L1n:
	mes " ";
	mes "しかし何も起こらなかった。";
L2:
	close;
}
